# Aether

Revive's Component Library

## Getting started

### Pre-requisites

To work with this project, you'll need to have [Node](https://nodejs.org/en/download/) and [Yarn](https://classic.yarnpkg.com/lang/en/docs/install) installed on your system.

### Installation

1. `git clone https://github.com/Revive-Home/Aether.git && cd aether`
2. `yarn install`

Before you start contributing to Aether, be sure to read the contribution guide (TBA)

## Development

Aether uses following technologies:

- React
- TypeScript
- Tailwind
- Vite
- Storybook

Run `yarn storybook` to start Storybook for development.

### Tailwind

To style the components, Aether uses [TailwindCSS](https://tailwindcss.com/).

#### Overriding the styles

The styling of Aether components can be overridden in the consumer apps by passing the Tailwind classes to the className prop.

**_TODO: Add tailwind guideline/practice_**

**Theme**
Aether utilizes the custom theming feature of Tailwind. The custom theming can be configured in [`tailwind.config.js`](tailwind.config.cjs).

- [Tailwind, Customizing Colors](https://tailwindcss.com/docs/customizing-colors)

### Headless UI

Aether uses [`headlessui`](https://headlessui.com/) to abstract away some of the component behavior logic.

<a name="usage"></a>

## Usage

Within a separate application that uses Aether, import the desired component as follows:

```TypeScript
import { Button } from "@revive/aether";
```

Within Aether itself, import the desired component by pointing to the component file. The alias (`@`) should be used for the import path:

```TypeScript
import { Button } from "@/components/Button";
```

### Using Aether package locally

Aether can be installed and tested locally without publishing to NPM by using [yalc](https://github.com/wclr/yalc).

In Aether, change the version in package.json to indicate this is a test package.

Example: `0.0.0-yalc-test`

Then, run

```
yarn build && yalc publish
```

`yarn build` will build the package and create `/dist`, then `yalc publish` command will copy all the files that should be published in remote NPM registry.

Then in consuming app, run

```
yalc add <package_name@version_number> && yarn
```

The `<@version_number>` should match the version in package.json of Aether.

To import Aether components, refer to the [Usage](#usage) section.

## Writing components

All components should be written in TypeScript. Export the interface or type so they can be consumable in the app.

Each prop defined in the interfaces or types should have a description. Storybook Docs will translate these descriptions and generates the Props Table.

Example:

```TypeScript
export interface ButtonProps
  extends React.HTMLAttributes<HTMLButtonElement | HTMLAnchorElement> {
  /** Text within the button */
  children?: React.ReactNode | React.ReactNode[];
  /** Provide a custom className that is applied directly to the button */
  className?: string;
  /** Specify whether the control is disabled */
  disabled?: boolean;
  /** Specify the theme of the button */
  variant?: "primary" | "secondary" | "gray" | "turquoise";
}
```

The components need to be exported in the `src/index.ts` file to be consumable. The type definition will be automatically generated by the Vite and included to the bundle.

## Unit Testing and Visual Regression Testing

For unit testing, Aether uses [Vitest](https://vitest.dev/guide/) and [React Testing Library](https://testing-library.com/docs/react-testing-library/api).

### Chromatic Visual Regression Testing

**_TODO: Add Chromatic description/usage_**

---

### Vite and `.cjs` extension

Since the version 3, Vite is adding `"type": "module"` to the package.json of projects it creates to [optimize ESbuild deps at build time](https://vitejs.dev/blog/announcing-vite3.html#esbuild-deps-optimization-at-build-time-experimental). So to use commonjs, it is necessary to use the .cjs extension.
